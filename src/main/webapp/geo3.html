<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"> 
    <title>Geolocation Demo</title>
  </head>
  <body>
    <div id="msg"></div>
    <input type="text" id="lat"/>
    <input type="text" id="lon"/>
    <script type="text/javascript">
      window.onload=function(){
        if(navigator.geolocation == undefined){
          alert("不支持Geolocation。");
          return;
         }
         
         navigator.geolocation.watchPosition(
          successCallback, errorCallback);
      };
      
      function successCallback(position){
        var lat = position.coords.latitude;
        var lon = position.coords.longitude;
        
        document.getElementById("lat").value=lat;
        document.getElementById("lon").value=lon;
        
      
     
       }
      
      
      function errorCallback(err){
        alert("失败("+err.code+")"+err.message);
      }
      
      
    </script>
  </body>
</html>